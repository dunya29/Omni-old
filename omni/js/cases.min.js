"use strict";document.addEventListener("DOMContentLoaded",(()=>{let e=location.href.split("/"),t=e.findIndex((e=>"proekty"===e));if(-1!=t&&t!=e.length-1&&""!=e[t+1]){sessionStorage.setItem("projectPath",location.pathname);let t=e.slice(0,e.length-1).join("/");window.location.replace(t+"/")}}));let i=0;function loaded(e){e.src=e.dataset.src,e.parentNode.querySelector("source")&&e.parentNode.querySelectorAll("source").forEach((e=>{e.srcset=e.dataset.srcset}))}function loadImg(e){loaded(e[i]),document.querySelectorAll(".lazy")[i].onload=function(){e[i].removeAttribute("data-src"),e[i].parentNode.querySelector("source")&&e[i].parentNode.querySelectorAll("source").forEach((e=>{e.removeAttribute("data-srcset")})),i===e.length-1&&(document.querySelector(".case__body").style.pointerEvents="auto"),i<e.length-1&&(i++,loadImg(e))}}if(document.querySelectorAll(".lazy").length>0){loadImg(document.querySelectorAll(".lazy"))}function enableScroll(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.querySelector(".footer").style.right="0px",document.body.classList.remove("dis-scroll")}function disableScroll(){let e=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.querySelector(".footer").style.right=e,document.body.classList.add("dis-scroll")}function openModal(e){disableScroll(),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),setTimeout((()=>{enableScroll()}),300)}function changeUrl(e){let t,o;document.querySelector(".fancy-modal").classList.contains("open")||(o=window.location.href,t=document.title),function e(l){let r=l.getAttribute("href");fetch(r).then((e=>{if(e.ok)return e.text();throw new Error("Something went wrong")})).then((e=>{let t=(new window.DOMParser).parseFromString(e,"text/html");document.title=t.title,document.querySelector(".fancy-modal .modal__inner").innerHTML=t.querySelector(".case__content").innerHTML})).then((l=>{openModal(document.querySelector(".fancy-modal")),window.history.pushState("","",r);let c=document.querySelector(".fancy-modal");if(c&&c.querySelector(".works-card")&&c.querySelectorAll(".works-card").forEach((t=>{t.addEventListener("click",(o=>{o.preventDefault(),$(".modal__overlay").stop().animate({scrollTop:0},1500),e(t)}))})),c&&c.querySelectorAll(".lazy").length>0){i=0,loadImg(c.querySelectorAll(".lazy"))}document.querySelector(".modal__overlay").addEventListener("click",(e=>{document.querySelector(".modal__content").contains(e.target)||(document.title=t,window.history.replaceState("","",o),closeModal(document.querySelector(".fancy-modal")))}))})).catch((e=>{console.log(e)}))}(e)}window.addEventListener("load",(()=>{document.querySelector(".works-card")&&document.querySelectorAll(".works-card").forEach((e=>{if(e.getAttribute("href").includes(sessionStorage.getItem("projectPath")))return setTimeout((()=>{sessionStorage.removeItem("projectPath")}),200),void e.click()})),$(document).on("click",".modal .js-pageup",(function(){$(".modal__overlay").stop().animate({scrollTop:0},1500)})),document.querySelector(".modal__overlay")&&document.querySelector(".modal__overlay").addEventListener("scroll",(()=>{document.querySelector(".modal__overlay").scrollTop>400?document.querySelector(".js-pageup").classList.add("show"):document.querySelector(".js-pageup").classList.remove("show")})),document.querySelector(".works-card")&&document.querySelectorAll(".works-card").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),changeUrl(e)}))}))}));