"use strict";document.addEventListener("DOMContentLoaded",(()=>{let e=location.href.split("/");console.log(e);let t=e.findIndex((e=>"proekty"===e));if(-1!=t&&t!=e.length-1&&""!=e[t+1]){sessionStorage.setItem("projectPath",e[e.length-1]);let t=e.slice(0,e.length-1).join("/");window.location.replace(t+"/")}}));let i=0;function loaded(e){e.src=e.dataset.src,e.parentNode.querySelector("source")&&e.parentNode.querySelectorAll("source").forEach((e=>{e.srcset=e.dataset.srcset}))}function loadImg(e){loaded(e[i]),document.querySelectorAll(".lazy")[i].onload=function(){e[i].removeAttribute("data-src"),e[i].parentNode.querySelector("source")&&e[i].parentNode.querySelectorAll("source").forEach((e=>{e.removeAttribute("data-srcset")})),i===e.length-1&&(document.querySelector(".case__body").style.pointerEvents="auto"),i<e.length-1&&(i++,loadImg(e))}}if(document.querySelectorAll(".lazy").length>0){loadImg(document.querySelectorAll(".lazy"))}function enableScroll(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.querySelector(".footer").style.right="0px",document.body.classList.remove("dis-scroll")}function disableScroll(){let e=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.querySelector(".footer").style.right=e,document.body.classList.add("dis-scroll")}function openModal(e){disableScroll(),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),setTimeout((()=>{enableScroll()}),300)}function changeUrl(e){let t,o;document.querySelector(".fancy-modal").classList.contains("open")||(o=window.location.href,t=document.title),function e(c){let r=c.getAttribute("href");fetch(r).then((e=>{if(e.ok)return e.text();throw new Error("Something went wrong")})).then((e=>{let t=(new window.DOMParser).parseFromString(e,"text/html");document.title=t.title,document.querySelector(".fancy-modal .modal__inner").innerHTML='<div class="modal-loading-icon"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n              width="26.349px" height="26.35px" viewBox="0 0 26.349 26.35" style="enable-background:new 0 0 26.349 26.35;"\n              xml:space="preserve">\n             <g>\n               <circle cx="13.792" cy="3.082" r="3.082"/>\n               <circle cx="13.792" cy="24.501" r="1.849"/>\n               <circle cx="6.219" cy="6.218" r="2.774"/>\n               <circle cx="21.365" cy="21.363" r="1.541"/>\n               <circle cx="3.082" cy="13.792" r="2.465"/>\n               <circle cx="24.501" cy="13.791" r="1.232"/>\n               <path d="M4.694,19.84c-0.843,0.843-0.843,2.207,0,3.05c0.842,0.843,2.208,0.843,3.05,0c0.843-0.843,0.843-2.207,0-3.05\n                 C6.902,18.996,5.537,18.988,4.694,19.84z"/>\n               <circle cx="21.364" cy="6.218" r="0.924"/>\n             </g>\n           \n           </svg></div>'})).then((c=>{openModal(document.querySelector(".fancy-modal")),window.history.pushState("","",r);let l=document.querySelector(".fancy-modal");if(l&&l.querySelector(".works-card")&&l.querySelectorAll(".works-card").forEach((t=>{t.addEventListener("click",(o=>{o.preventDefault(),document.querySelector(".fancy-modal .modal__inner").innerHTML=doc.querySelector(".case__content").innerHTML='<div class="modal-loading-icon"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n              width="26.349px" height="26.35px" viewBox="0 0 26.349 26.35" style="enable-background:new 0 0 26.349 26.35;"\n              xml:space="preserve">\n             <g>\n               <circle cx="13.792" cy="3.082" r="3.082"/>\n               <circle cx="13.792" cy="24.501" r="1.849"/>\n               <circle cx="6.219" cy="6.218" r="2.774"/>\n               <circle cx="21.365" cy="21.363" r="1.541"/>\n               <circle cx="3.082" cy="13.792" r="2.465"/>\n               <circle cx="24.501" cy="13.791" r="1.232"/>\n               <path d="M4.694,19.84c-0.843,0.843-0.843,2.207,0,3.05c0.842,0.843,2.208,0.843,3.05,0c0.843-0.843,0.843-2.207,0-3.05\n                 C6.902,18.996,5.537,18.988,4.694,19.84z"/>\n               <circle cx="21.364" cy="6.218" r="0.924"/>\n             </g>\n           \n           </svg></div>',e(t)}))})),l&&l.querySelectorAll(".lazy").length>0){i=0,loadImg(l.querySelectorAll(".lazy"))}document.querySelector(".modal__overlay").addEventListener("click",(e=>{document.querySelector(".modal__content").contains(e.target)||(document.title=t,window.history.replaceState("","",o),closeModal(document.querySelector(".fancy-modal")))}))})).catch((e=>{console.log(e)}))}(e)}window.addEventListener("load",(()=>{document.querySelector(".works-card")&&document.querySelectorAll(".works-card").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),changeUrl(e)}))})),document.querySelector(".works-card")&&document.querySelectorAll(".works-card").forEach((e=>{if(e.getAttribute("href").includes(sessionStorage.getItem("projectPath")))return setTimeout((()=>{sessionStorage.removeItem("projectPath")}),200),void e.click()})),$(document).on("click",".modal .js-pageup",(function(){$(".modal__overlay").stop().animate({scrollTop:0},1500)})),document.querySelector(".modal__overlay")&&document.querySelector(".modal__overlay").addEventListener("scroll",(()=>{document.querySelector(".modal__overlay").scrollTop>400?document.querySelector(".js-pageup").classList.add("show"):document.querySelector(".js-pageup").classList.remove("show")}))}));