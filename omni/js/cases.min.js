"use strict";document.addEventListener("DOMContentLoaded",(()=>{let e=location.href.split("/");console.log(e);let t=e.findIndex((e=>"proekty"===e));if(-1!=t&&t!=e.length-1&&""!=e[t+1]){sessionStorage.setItem("projectPath",e[e.length-1]);let t=e.slice(0,e.length-1).join("/");window.location.replace(t+"/")}}));let i=0;function loaded(e){e.src=e.dataset.src,e.parentNode.querySelector("source")&&e.parentNode.querySelectorAll("source").forEach((e=>{e.srcset=e.dataset.srcset}))}function loadImg(e){loaded(e[i]),document.querySelectorAll(".lazy")[i].onload=function(){e[i].removeAttribute("data-src"),e[i].parentNode.querySelector("source")&&e[i].parentNode.querySelectorAll("source").forEach((e=>{e.removeAttribute("data-srcset")})),i===e.length-1&&(document.querySelector(".case__body").style.pointerEvents="auto"),i<e.length-1&&(i++,loadImg(e))}}if(document.querySelectorAll(".lazy").length>0){loadImg(document.querySelectorAll(".lazy"))}function enableScroll(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.querySelector(".footer").style.right="0px",document.body.classList.remove("dis-scroll")}function disableScroll(){let e=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.querySelector(".footer").style.right=e,document.body.classList.add("dis-scroll")}function openModal(e){disableScroll(),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),setTimeout((()=>{enableScroll()}),300)}function changeUrl(e){let t,o;document.querySelector(".fancy-modal").classList.contains("open")||(o=window.location.href,t=document.title),function e(l){let r=l.getAttribute("href");document.querySelector(".fancy-modal").classList.contains("open")||openModal(document.querySelector(".fancy-modal")),fetch(r).then((e=>{if(e.ok)return e.text();throw new Error("Something went wrong")})).then((l=>{let c=(new window.DOMParser).parseFromString(l,"text/html");document.title=c.title,document.querySelector(".fancy-modal .modal__inner").innerHTML=c.querySelector(".case__content").innerHTML,document.querySelector(".modal .btn-main").opacity=1,document.querySelector(".modal .btn-main").visibility="visible",window.history.pushState("","",r);let n=document.querySelector(".fancy-modal");if(n&&n.querySelector(".works-card")&&n.querySelectorAll(".works-card").forEach((t=>{t.addEventListener("click",(o=>{o.preventDefault(),e(t)}))})),n&&n.querySelectorAll(".lazy").length>0){i=0,loadImg(n.querySelectorAll(".lazy"))}document.querySelector(".modal").addEventListener("click",(e=>{console.log(e.target.classList.contains(".modal__overlay")),(e.target.classList.contains(".modal__overlay")||e.target.classList.contains(".modal__close"))&&(document.title=t,window.history.replaceState("","",o),closeModal(document.querySelector(".fancy-modal")))}))})).catch((e=>{console.log(e)}))}(e)}window.addEventListener("load",(()=>{document.querySelector(".works-card")&&document.querySelectorAll(".works-card").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),changeUrl(e)}))})),document.querySelector(".works-card")&&document.querySelectorAll(".works-card").forEach((e=>{if(e.getAttribute("href").includes(sessionStorage.getItem("projectPath")))return setTimeout((()=>{sessionStorage.removeItem("projectPath")}),200),void e.click()})),$(document).on("click",".modal .js-pageup",(function(){$(".modal__overlay").stop().animate({scrollTop:0},1500)})),document.querySelector(".modal__overlay")&&document.querySelector(".modal__overlay").addEventListener("scroll",(()=>{document.querySelector(".modal__overlay").scrollTop>400?document.querySelector(".js-pageup").classList.add("show"):document.querySelector(".js-pageup").classList.remove("show")}))}));