"use strict";document.addEventListener("DOMContentLoaded",(()=>{let e=location.href.split("/"),t=e.findIndex((e=>"proekty"===e));if(-1!=t&&t!=e.length-1&&""!=e[t+1]){sessionStorage.setItem("projectPath",e[e.length-1]);let t=e.slice(0,e.length-1).join("/");window.location.replace(t+"/")}}));let i=0;function loaded(e){e.src=e.dataset.src,e.parentNode.querySelector("source")&&e.parentNode.querySelectorAll("source").forEach((e=>{e.srcset=e.dataset.srcset}))}function loadImg(e,t){loaded(e[t]),e[t].onload=function(){e[t].removeAttribute("data-src"),e[t].parentNode.querySelector("source")&&e[t].parentNode.querySelectorAll("source").forEach((e=>{e.removeAttribute("data-srcset")})),t===e.length-1&&(document.querySelector(".case__body").style.pointerEvents="auto"),t<e.length-1&&(t++,loadImg(e,t))}}if(document.querySelectorAll(".lazy").length>0){loadImg(document.querySelectorAll(".lazy"),i)}function enableScroll(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.querySelector(".footer").style.right="0px",document.body.classList.remove("dis-scroll")}function disableScroll(){console.log(window.innerWidth-document.documentElement.clientWidth);let e=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.querySelector(".footer").style.right=e,document.body.classList.add("dis-scroll")}function openModal(e){disableScroll(),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),document.querySelector(".modal .btn-main").style.opacity=0,document.querySelector(".modal .btn-main").style.visibility="hidden",e.querySelector(".modal__inner").innerHTML="",enableScroll()}function changeUrl(e){let t,o;o=window.location.href,t=document.title,function e(l){let c=l.getAttribute("href");document.querySelector(".fancy-modal").classList.contains("open")||openModal(document.querySelector(".fancy-modal")),document.querySelector(".fancy-modal .modal__inner").innerHTML='<div class="modal-loading-icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          width="26.349px" height="26.35px" viewBox="0 0 26.349 26.35" style="enable-background:new 0 0 26.349 26.35;"\n          xml:space="preserve">\n         <g>\n           <circle cx="13.792" cy="3.082" r="3.082"/>\n           <circle cx="13.792" cy="24.501" r="1.849"/>\n           <circle cx="6.219" cy="6.218" r="2.774"/>\n           <circle cx="21.365" cy="21.363" r="1.541"/>\n           <circle cx="3.082" cy="13.792" r="2.465"/>\n           <circle cx="24.501" cy="13.791" r="1.232"/>\n           <path d="M4.694,19.84c-0.843,0.843-0.843,2.207,0,3.05c0.842,0.843,2.208,0.843,3.05,0c0.843-0.843,0.843-2.207,0-3.05\n             C6.902,18.996,5.537,18.988,4.694,19.84z"/>\n           <circle cx="21.364" cy="6.218" r="0.924"/>\n         </g>\n       \n       </svg></div>',document.querySelector(".modal .btn-main").style.opacity=0,document.querySelector(".modal .btn-main").style.visibility="hidden",fetch(c).then((e=>{if(e.ok)return e.text();throw new Error("Something went wrong")})).then((l=>{let n=(new window.DOMParser).parseFromString(l,"text/html");document.title=n.title,document.querySelector(".fancy-modal .modal__inner").innerHTML=n.querySelector(".case__content").innerHTML,document.querySelector(".modal .btn-main").style.opacity=1,document.querySelector(".modal .btn-main").style.visibility="visible",window.history.pushState("","",c);let r=document.querySelector(".fancy-modal");if(r&&r.querySelector(".works-card")&&r.querySelectorAll(".works-card").forEach((t=>{t.addEventListener("click",(o=>{o.preventDefault(),e(t)}))})),r&&r.querySelectorAll(".lazy").length>0){let e=0;loadImg(r.querySelectorAll(".lazy"),e)}document.querySelector(".modal").addEventListener("click",(e=>{(e.target.classList.contains("modal__overlay")||e.target.classList.contains("modal__close"))&&(document.title=t,window.history.replaceState("","",o),closeModal(document.querySelector(".fancy-modal")))}))})).catch((e=>{console.log(e)}))}(e)}window.addEventListener("load",(()=>{if(document.querySelector(".works-card")&&document.querySelectorAll(".works-card").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),changeUrl(e)}))})),document.querySelector(".works-card")&&document.querySelectorAll(".works-card").forEach((e=>{if(e.getAttribute("href").includes(sessionStorage.getItem("projectPath")))return setTimeout((()=>{sessionStorage.removeItem("projectPath")}),200),void e.click()})),$(document).on("click",".modal .js-pageup",(function(){$(".modal__overlay").stop().animate({scrollTop:0},1500)})),document.querySelector(".modal__overlay")){let e=0;const t=()=>window.pageYOffset||document.documentElement.scrollTop,o=()=>document.querySelector(".modal__close").classList.contains("hide");document.querySelector(".modal__overlay").addEventListener("scroll",(()=>{t()>e&&!o()&&t()>10?document.querySelector(".modal__close").classList.add("hide"):t()<e&&o()&&document.querySelector(".modal__close").classList.remove("hide"),e=t(),document.querySelector(".modal__overlay").scrollTop>400?document.querySelector(".js-pageup").classList.add("show"):document.querySelector(".js-pageup").classList.remove("show")}))}}));